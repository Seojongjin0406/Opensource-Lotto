<!DOCTYPE html>
<html>
  <body>
    <h2>로또 구매</h2>
    <form method="post" id="lottoForm">
      {% csrf_token %}
      <label>이름: <input type="text" name="name" required></label><br><br>

      <label><input type="radio" name="mode" value="manual" checked> 수동</label>
      <div id="manualInputs">
        <!-- 6개 숫자칸 -->
        {% for i in "123456" %}
          <input type="number" name="n{{ forloop.counter }}" min="1" max="45">
        {% endfor %}
      </div>

      <label style="display:block; margin-top:8px;">
        <input type="radio" name="mode" value="auto"> 자동
      </label>

      <br>
      <button type="submit">제출</button>
    </form>

    <p><a href="{% url 'results_user' %}">내 결과 보기</a> | <a href="{% url 'home' %}">홈</a></p>

    <script>
      // 수동/자동 선택에 따라 숫자칸 required/disabled 토글
      const form = document.getElementById('lottoForm');
      const radios = form.querySelectorAll('input[name="mode"]');
      const manualInputs = form.querySelectorAll('#manualInputs input[type="number"]');

      function updateFields() {
        const mode = form.querySelector('input[name="mode"]:checked').value;
        const isManual = mode === 'manual';
        manualInputs.forEach(inp => {
          inp.required = isManual;   // 수동일 때만 필수
          inp.disabled = !isManual;  // 자동일 땐 비활성화(서버로 전송되지 않음)
          if (!isManual) inp.value = ''; // 자동 전환 시 쓰던 값 비움(혼선 방지)
        });
      }

      radios.forEach(r => r.addEventListener('change', updateFields));
      updateFields(); // 초기 적용
    </script>
  </body>
</html>
